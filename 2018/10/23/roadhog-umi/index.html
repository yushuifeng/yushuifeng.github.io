
<!DOCTYPE html>
<html lang="" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SF.Y</title>

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <meta name="keywords" content="Fechin,"> 
    <meta name="description" content="è®°è„šæ‰‹æ¶å‡çº§ç°æœ‰è„šæ‰‹æ¶ä½¿ç”¨åŠå¹´æœ‰ä½™äº†ï¼Œå„ä¾èµ–ä¸€ç›´æ²¡æœ‰å‡çº§ã€‚å‰å‡ å¤©å¼€å‘è¿‡ç¨‹ä¸­å‡ºç°äº†å¼€å‘ç¯å¢ƒä½¿ç”¨äº†æœ€æ–°ç‰ˆ API è€Œæµ‹è¯•ç¯å¢ƒä¸Šä¸æ”¯æŒè€Œå¼•å‘æŠ¥é”™çš„é—®é¢˜ã€‚
å¯¹ä¾èµ–è¿›è¡Œå‡çº§çš„è¿‡ç¨‹ä¸­å…³æ³¨åˆ°äº†åŸºç¡€è„šæ‰‹æ¶çš„ç‰ˆæœ¬,"> 
    <meta name="author" content="SF.Y"> 
    <link rel="alternative" href="atom.xml" title="SF.Y" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.ico"> 
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <link rel="stylesheet" href="/css/diaspora.css">
</head>

<body class="loading">
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="icon-home image-icon" href="javascript:;"></a>
    <div title="æ’­æ”¾/æš‚åœ" class="icon-play"></div>
    <h3 class="subtitle">roadhog -> umi</h3>
    <div class="social">
        <!--<div class="like-icon">-->
            <!--<a href="javascript:;" class="likeThis active"><span class="icon-like"></span><span class="count">76</span></a>-->
        <!--</div>-->
        <div>
            <div class="share">
                <a title="è·å–äºŒç»´ç " class="icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>
    <div class="section">
        <div class="article">
    <div class='main'>
        <h1 class="title">roadhog -> umi</h1>
        <div class="stuff">
            <span>åæœˆ 23, 2018</span>
            

        </div>
        <div class="content markdown">
            <h1 id="è®°è„šæ‰‹æ¶å‡çº§"><a href="#è®°è„šæ‰‹æ¶å‡çº§" class="headerlink" title="è®°è„šæ‰‹æ¶å‡çº§"></a>è®°è„šæ‰‹æ¶å‡çº§</h1><p>ç°æœ‰è„šæ‰‹æ¶ä½¿ç”¨åŠå¹´æœ‰ä½™äº†ï¼Œå„ä¾èµ–ä¸€ç›´æ²¡æœ‰å‡çº§ã€‚å‰å‡ å¤©å¼€å‘è¿‡ç¨‹ä¸­å‡ºç°äº†å¼€å‘ç¯å¢ƒä½¿ç”¨äº†æœ€æ–°ç‰ˆ API è€Œæµ‹è¯•ç¯å¢ƒä¸Šä¸æ”¯æŒè€Œå¼•å‘æŠ¥é”™çš„é—®é¢˜ã€‚</p>
<p>å¯¹ä¾èµ–è¿›è¡Œå‡çº§çš„è¿‡ç¨‹ä¸­å…³æ³¨åˆ°äº†åŸºç¡€è„šæ‰‹æ¶çš„ç‰ˆæœ¬ï¼Œå¯¹å…¶äº†è§£åè¿›è€Œè¿›è¡Œäº†æ•´ä½“çš„å‡çº§ï¼šä» ant-design-pro v1.0 -&gt; v2.1</p>
<p>å€Ÿé‰´ä¸Šæ¬¡çš„ç»éªŒï¼Œç›´æ¥å» <img src="https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg" width="10"> <a href="https://pro.ant.design/docs/upgrade-v2-cn" target="_blank" rel="noopener">ant-design-pro</a> å®˜ç½‘ï¼Œæ–‡æ¡£ä¸­æœ‰å‡çº§åˆ°2.0ç‰ˆæœ¬çš„è¯¦ç»†æ­¥éª¤ã€‚æœ¬è´¨ä¸Šè¦çš„å°±æ˜¯è„šæ‰‹æ¶çš„å˜åŒ–ï¼Œroadhog -&gt; umiï¼</p>
<p>æ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šçš„é—®é¢˜ï¼ŒæŒ‰ç…§æ­¥éª¤æ“ä½œå°±å¯ä»¥ã€‚<br>æ‘˜æŠ„ä¸€ä¸‹å®˜ç½‘çš„æ¡ç›®ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">- æŠŠ package.json roadhog çš„ä¾èµ–ä¿®æ”¹ä¸º umiã€‚</span><br><span class="line">- æ‹·è´ .webpackrc.js ä¸­çš„é…ç½®åˆ° config/config.js ä¸­ã€‚</span><br><span class="line">- ä¿®æ”¹ src/routes ç›®å½•åç§°ä¸º pagesï¼Œpages æ˜¯ umi çº¦å®šçš„ç›®å½•ã€‚</span><br><span class="line">- åˆ é™¤ src/models/index.jsï¼Œåœ¨ umi ä¸­ models æ–‡ä»¶å¤¹ä¸­çš„ dva model ä¼šè¢«è‡ªåŠ¨æŒ‚è½½ã€‚</span><br><span class="line">- é‡å‘½å index.ejs ä¸º pages/document.ejsï¼Œå®ƒæ˜¯ umi çº¦å®šçš„æ–‡ä»¶ã€‚</span><br><span class="line">- ä¿®æ”¹ index.less ä¸º global.less å’Œä¿®æ”¹ index.js ä¸º global.jsï¼Œä»–ä»¬ä¹Ÿæ˜¯ umi çº¦å®šçš„æ–‡ä»¶ã€‚</span><br><span class="line">- åœ¨ config/config.js ä¸­æ·»åŠ è·¯ç”±é…ç½® routesã€‚</span><br><span class="line">- ä¿®æ”¹ src/layouts/BasicLayout.js ä¸­çš„ç»„ä»¶åµŒå¥—è¯­æ³•ã€‚</span><br><span class="line">- ä¿®æ”¹ 404 é¡µé¢ã€‚</span><br><span class="line">- ä¿®æ”¹æƒé™è·¯ç”± AuthorizedRoute çš„é€»è¾‘ã€‚</span><br><span class="line">- ä¿®æ”¹ mockã€‚</span><br><span class="line">- åœ¨ .gitignore ä¸­æ·»åŠ  umi ç›¸å…³æ–‡ä»¶ã€‚</span><br><span class="line">- é€šè¿‡æ‰§è¡Œ tnpm start å’Œ tnpm run lint ä¿®æ”¹å¯èƒ½å‡ºç°çš„é—®é¢˜ã€‚</span><br></pre></td></tr></table></figure></p>
<p>æ³¨æ„ä¸€å®šè¦å…ˆäº†è§£ä¸€ä¸‹ <a href="https://umijs.org/zh/" target="_blank" rel="noopener">UmiJS</a> ï¼</p>
<h1 id="ã€é™„ï¼šè¿ç§»æ­¥éª¤ç»†èŠ‚ã€‘"><a href="#ã€é™„ï¼šè¿ç§»æ­¥éª¤ç»†èŠ‚ã€‘" class="headerlink" title="ã€é™„ï¼šè¿ç§»æ­¥éª¤ç»†èŠ‚ã€‘"></a>ã€é™„ï¼šè¿ç§»æ­¥éª¤ç»†èŠ‚ã€‘</h1><h3 id="ä¿®æ”¹-roadhog-ä¾èµ–ä¸º-umi"><a href="#ä¿®æ”¹-roadhog-ä¾èµ–ä¸º-umi" class="headerlink" title="ä¿®æ”¹ roadhog ä¾èµ–ä¸º umi"></a>ä¿®æ”¹ roadhog ä¾èµ–ä¸º umi</h3><p>æ‰“å¼€é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ <figure class="highlight plain"><figcaption><span>umiï¼š</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line">&quot;dependencies&quot;: &#123;</span><br><span class="line">- &quot;dva&quot;: &quot;^2.2.3&quot;,</span><br><span class="line">- &quot;dva-loading&quot;: &quot;^2.0.3&quot;,</span><br><span class="line">- &quot;react-dom&quot;: &quot;^16.4.1&quot;,</span><br><span class="line">- &quot;react-loadable&quot;: &quot;^5.5.0&quot;,</span><br><span class="line">  ...</span><br><span class="line">&#125;,</span><br><span class="line">&quot;devDependencies&quot;: &#123;</span><br><span class="line">+ &quot;umi&quot;: &quot;^2.0.0&quot;,</span><br><span class="line">+ &quot;umi-plugin-react&quot;: &quot;^1.0.0&quot;,</span><br><span class="line">- &quot;roadhog&quot;: &quot;^2.4.2&quot;,</span><br><span class="line">- &quot;roadhog-api-doc&quot;: &quot;^1.1.2&quot;,</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>åœ¨ umi ä¸­å†…ç½®äº† Reactï¼Œé€šè¿‡ umi-plugin-react æ’ä»¶é›†å†…ç½®äº† antd å’Œ dva ç­‰ React æŠ€æœ¯æ ˆå¸¸ç”¨çš„åº“ã€‚å¯ä»¥å‚è€ƒ <a href="https://umijs.org/plugin/umi-plugin-react.html" target="_blank" rel="noopener">umi-plugin-react</a> çš„æ–‡æ¡£ã€‚</p>
<p>å¦å¤– <figure class="highlight plain"><figcaption><span>ä¸­çš„ scripts ä¹Ÿè¦åšå¯¹åº”çš„ä¿®æ”¹ï¼š</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line">- &quot;start&quot;: &quot;cross-env ESLINT=none roadhog dev&quot;,</span><br><span class="line">- &quot;start:no-proxy&quot;: &quot;cross-env NO_PROXY=true ESLINT=none roadhog dev&quot;,	    </span><br><span class="line">- &quot;build&quot;: &quot;cross-env ESLINT=none roadhog build&quot;,</span><br><span class="line">+ &quot;start&quot;: &quot;umi dev&quot;,</span><br><span class="line">+ &quot;start:no-mock&quot;: &quot;cross-env MOCK=none umi dev&quot;,</span><br><span class="line">+ &quot;build&quot;: &quot;umi build&quot;,</span><br></pre></td></tr></table></figure></p>
<p>ä¿®æ”¹å®Œæˆä¹‹åè®°å¾—ä¸è¦å¿˜è®°ä½¿ç”¨ <figure class="highlight plain"><figcaption><span>update``` å°†ä¾èµ–æ›´æ–°åˆ°æœ€æ–°ã€‚</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### æ·»åŠ é…ç½®æ–‡ä»¶ config/config.js#</span><br><span class="line">umi çº¦å®šäº† ```.umirc.js``` å’Œ ```config/config.js``` ä¸º umi çš„é…ç½®æ–‡ä»¶ï¼ˆäºŒé€‰ä¸€ï¼‰ï¼Œåœ¨ Ant Design Pro ä¸­å› ä¸ºé…ç½®æ¯”è¾ƒå¤šï¼Œæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨ config/config.jsã€‚</span><br><span class="line"></span><br><span class="line">ä½ éœ€è¦åœ¨é¡¹ç›®ä¸­åˆ›å»º ```config/config.js```ï¼Œè¯¥é…ç½®æ–‡ä»¶éœ€è¦é»˜è®¤å¯¼å‡ºä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢åŒ…å«äº† umi çš„å…¨éƒ¨é…ç½®ã€‚ä½ å¯ä»¥å…ˆåˆå§‹åŒ–ä¸ºå¦‚ä¸‹å†…å®¹ï¼š</span><br></pre></td></tr></table></figure></p>
<p>export default {<br>  plugins: [[<br>    â€˜umi-plugin-reactâ€™,<br>    {<br>      antd: true,<br>      dva: {<br>        hmr: true,<br>      },<br>    }<br>  ]]<br>};<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">è¯¥é…ç½®ä¼šæŒ‚è½½ umi-plugin-react æ’ä»¶é›†å¹¶æ‰“å¼€ antd å’Œ dva æ’ä»¶ï¼Œä½¿å¾—ä½ åœ¨é¡¹ç›®ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ antd å’Œ dvaã€‚</span><br><span class="line"></span><br><span class="line">æ·»åŠ  ```config/config.js``` ä¹‹åä½ å¯ä»¥å°†ä½ é¡¹ç›®ä¸‹çš„ ```.webpackrc.js``` ä¸­çš„é…ç½®ä¹Ÿè¿ç§»åˆ° ```config/config.js``` ä¸­ã€‚ ```.webpackrc.js``` æ˜¯ ```af-webpack``` çš„é…ç½®æ–‡ä»¶ï¼Œumi å’Œ roadhog éƒ½æ˜¯ä¾èµ–äºå®ƒï¼Œæ‰€ä»¥ä½ å¯ä»¥ç›´æ¥è¿ç§»è¿‡æ¥ã€‚è¿ç§»è¿‡æ¥ä¹‹åå°±å¯ä»¥åˆ é™¤åŸæœ‰çš„ .webpackrc.js å’Œ .babelrc.js æ–‡ä»¶äº†ã€‚</span><br><span class="line"></span><br><span class="line">ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ .webpackrc.js ä¸­çš„å¦‚ä¸‹é…ç½®æ˜¯æ²¡æœ‰å¿…è¦å¤åˆ¶åˆ° config/config.js ä¸­çš„ï¼š</span><br><span class="line"></span><br><span class="line">+ entry: umi ä¼šæœ‰é»˜è®¤çš„è·¯ç”±æœºåˆ¶ï¼Œéœ€è¦åˆ é™¤è¯¥é…ç½®ã€‚</span><br><span class="line"></span><br><span class="line">+ extraBabelPlugins: umi-plugin-react ä¸­ä¼šå†…ç½®å¯¹ antd çš„æŒ‰éœ€ç¼–è¯‘çš„æ”¯æŒï¼Œä¸å†éœ€è¦æ‰‹åŠ¨é…ç½®ã€‚</span><br><span class="line"></span><br><span class="line">+ env: env ä¸‹çš„ dva-hmr æ’ä»¶ä¸å†éœ€è¦ï¼Œå¯ä»¥ç›´æ¥åœ¨ umi-plugin-react é…ç½®ä¸­å¼€å¯ã€‚</span><br><span class="line"></span><br><span class="line">+ alias: umi ä¸­é»˜è®¤ä¼šæ·»åŠ  @/ çš„åˆ«ååˆ° src ç›®å½•ã€‚</span><br><span class="line"></span><br><span class="line">+ html: umi é»˜è®¤ä½¿ç”¨ src/pages/document.ejs ä½œä¸º html æ¨¡æ¿ã€‚</span><br><span class="line"></span><br><span class="line">å¦å¤–æˆ‘ä»¬æ¨èå°† theme é…ç½®ç›´æ¥å†™åˆ° ```config/config.js``` ä¸­ï¼Œç„¶åå°±å¯ä»¥åˆ é™¤æ‰ ```src/theme.js``` äº†ã€‚</span><br><span class="line"></span><br><span class="line">### ä¿®æ”¹ routes ä¸º pages</span><br><span class="line">åœ¨ umi ä¸­å¤§é‡ä½¿ç”¨äº†çº¦å®šå’Œé…ç½®æ¥é«˜æ•ˆçš„å®ç°ä¸€äº›åŠŸèƒ½ï¼Œå…¶ä¸­ umi å°±çº¦å®šäº† ```src/pages``` ç›®å½•ä¸ºé¡µé¢ç»„ä»¶çš„å­˜æ”¾ç›®å½•ã€‚åœ¨ Ant Design Pro 1.0 ä¸­ï¼Œæˆ‘ä»¬çš„é¡µé¢éƒ½å­˜æ”¾åœ¨ ```src/routes``` ä¸‹é¢ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å°† routes é‡å‘½åä¸º pages å³å¯ã€‚</span><br><span class="line"></span><br><span class="line">### åˆ é™¤ models/index.js</span><br><span class="line">åœ¨ umi ä¸­ï¼ŒæŒ‚è½½äº† dva çš„æ’ä»¶ä¹‹å models ä¸‹çš„æ–‡ä»¶ä¼šè¢«é»˜è®¤å½“åš dva model å¼•å…¥ï¼Œæ‰€ä»¥ä¸å†éœ€è¦åœ¨ ```models/index.js``` ä¸­æ¥æ‰‹åŠ¨æŒ‚è½½ modelï¼Œå¯ä»¥ç›´æ¥åˆ é™¤è¯¥æ–‡ä»¶ã€‚</span><br><span class="line"></span><br><span class="line">### ä¿®æ”¹ index.ejs</span><br><span class="line">ç§»åŠ¨ ```index.ejs``` åˆ° ```pages/document.ejs```ï¼Œå®ƒæ˜¯ umi çº¦å®šçš„æ–‡ä»¶ã€‚å‚è€ƒ [umi HTML æ¨¡æ¿æ–‡æ¡£](https://umijs.org/guide/html-template.html)ã€‚</span><br><span class="line"></span><br><span class="line">### ä¿®æ”¹ index.js å’Œ index.less</span><br><span class="line">é‡å‘½å ```index.js``` ä¸º ```global.js```ï¼Œé‡å‘½å ```index.less``` ä¸º ```global.less```ï¼Œä»–ä»¬ä¼šè¢« umi è‡ªåŠ¨æŒ‚è½½ã€‚å¯ä»¥å‚è€ƒ umi çš„ç›®å½•çº¦å®šã€‚å¦å¤–å› ä¸º dva æ’ä»¶ä¼šè‡ªåŠ¨æŒ‚è½½ model å¹¶é»˜è®¤æ·»åŠ  dva-loading æ’ä»¶ï¼Œæ‰€ä»¥ index.js ä¸­çš„ dva ç›¸å…³çš„å†…å®¹å¯ä»¥è¢«ç§»é™¤äº†ã€‚åªéœ€è¦ä¿ç•™ç±»ä¼¼ä¸‹é¢è¿™äº›åˆå§‹åŒ–é€»è¾‘ï¼š</span><br></pre></td></tr></table></figure></p>
<p>import â€˜./polyfillâ€™;<br>import â€˜moment/locale/zh-cnâ€™;<br>import â€˜./rollbarâ€™;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å¦å¤– ```global.less``` ä¸­çš„ ```:global``` æ ‡å¿—ä¹Ÿå¯ä»¥ç§»é™¤äº†ï¼Œå› ä¸º ```global.less``` ä¸­çš„æ ·å¼é»˜è®¤å°±æ˜¯å…¨å±€çš„ï¼Œè¿™é‡Œè¦æ³¨æ„çš„æ˜¯é™¤äº†å®ƒå…¶å®ƒéƒ½ä¼šé»˜è®¤ä½¿ç”¨ cssModuleã€‚</span><br><span class="line"></span><br><span class="line">### æ·»åŠ è·¯ç”±é…ç½®</span><br><span class="line">è¿™ä¸€æ­¥æ˜¯æœ€é‡è¦çš„ï¼Œumi å†…ç½®äº†è·¯ç”±çš„å®ç°ï¼Œæä¾›äº†çº¦å®šå¼å’Œé…ç½®å¼ä¸¤ç§è·¯ç”±æ–¹å¼ã€‚åœ¨ Ant Design Pro ä¸­æˆ‘ä»¬ä½¿ç”¨é…ç½®å¼è·¯ç”±çš„æ–¹å¼ã€‚ä½ éœ€è¦åœ¨ ```config/config.js``` ä¸­æ·»åŠ é…ç½®é¡¹ routesï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬åŸºäº ```/dashboard``` é¡µé¢æä¾›äº†ä¸€ä¸ªæ ·ä¾‹ï¼Œä½ éœ€è¦æŒ‰ç…§ä½ çš„é¡¹ç›®å…·ä½“åšä¸‹è¿ç§»ã€‚æˆ‘ä»¬æ¨èæ·»åŠ ä¸€ä¸ª ```config/router.config.js``` çš„æ–‡ä»¶ç„¶ååœ¨ ```config/config.js``` ä¸­å¼•å…¥å®ƒï¼š</span><br></pre></td></tr></table></figure></p>
<p>// config/router.config.js<br>module.exports = [<br>  {<br>    path: â€˜/â€˜,<br>    component: â€˜../layouts/BasicLayoutâ€™,<br>    routes: [<br>      // dashboard<br>      { path: â€˜/â€˜, redirect: â€˜/dashboard/analysisâ€™ },<br>      {<br>        path: â€˜/dashboardâ€™,<br>        name: â€˜dashboardâ€™,<br>        icon: â€˜dashboardâ€™,<br>        routes: [<br>          { path: â€˜/dashboard/analysisâ€™, name: â€˜analysisâ€™, component: â€˜./Dashboard/Analysisâ€™ },<br>          { path: â€˜/dashboard/monitorâ€™, name: â€˜monitorâ€™, component: â€˜./Dashboard/Monitorâ€™ },<br>          { path: â€˜/dashboard/workplaceâ€™, name: â€˜workplaceâ€™, component: â€˜./Dashboard/Workplaceâ€™ },<br>        ],<br>      },<br>    ],<br>  },<br>];<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">å…¶ä¸­ component æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ˜¯ç›¸å¯¹äº ```src/pages``` çš„è·¯å¾„ï¼Œæ›´å¤šçš„è·¯ç”±é…ç½®ä½ å¯ä»¥å‚è€ƒ v2 ç‰ˆæœ¬çš„è·¯ç”±é…ç½®ï¼Œå’Œ umi çš„æ–‡æ¡£ã€‚å¦å¤–åŸæœ‰çš„ 1.0 ç‰ˆæœ¬çš„è·¯ç”±ä»£ç  ```src/common/router.js``` å’Œ ```src/router.js``` ä¹Ÿå¯ä»¥åˆ é™¤äº†ã€‚</span><br><span class="line"></span><br><span class="line">### ä¿®æ”¹å¸ƒå±€ç»„ä»¶</span><br><span class="line">å› ä¸ºä¸åœ¨ä½¿ç”¨ react-router@4 çš„ç»„ä»¶å¼è·¯ç”±ï¼Œæ‰€ä»¥ä½ éœ€è¦ä¿®æ”¹ä½ çš„å¸ƒå±€ç»„ä»¶ã€‚æŠŠå…¶ä¸­çš„ ```&lt;Switch/&gt;``` ç»„ä»¶éƒ¨åˆ†ä¿®æ”¹ä¸º ```&#123;this.props.children&#125;```ã€‚</span><br><span class="line"></span><br><span class="line">### ä¿®æ”¹ 404 é¡µé¢</span><br><span class="line">åœ¨ umi ä¸­é»˜è®¤ä½¿ç”¨ ```src/pages/404.js``` ä½œä¸º 404 é¡µé¢ï¼Œä½ éœ€è¦å°†åŸæ¥çš„ ```src/routes/Exception/404.js``` è¿ç§»è¿‡å»ã€‚</span><br><span class="line"></span><br><span class="line">### ä¿®æ”¹æƒé™è·¯ç”±</span><br><span class="line">åœ¨ 2.0 ä¸­ï¼Œä½ å¯ä»¥ç›´æ¥ä½¿ç”¨ umi æä¾›çš„æƒé™è·¯ç”±çš„æ–¹æ¡ˆã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä¿ç•™ 1.0 ä¸­çš„æ–¹æ¡ˆç»§ç»­ä½¿ç”¨ã€‚ç”±äºä¸æ˜¯å¿…è¦çš„ï¼Œåœ¨æœ¬æ–‡ä¸­å°±ä¸åšå…·ä½“è¯´æ˜äº†ã€‚</span><br><span class="line"></span><br><span class="line">### ä¿®æ”¹ mock æ•°æ®</span><br><span class="line">åœ¨ umi ä¸­ï¼Œé»˜è®¤ä¼šå°† ```mock/*.js``` çš„æ–‡ä»¶ä½œä¸º mock æ–‡ä»¶ã€‚æ‰€ä»¥å¯ä»¥å°† mock æ•°æ®çš„ URL ä¿¡æ¯è¿ç§»åˆ° mock æ–‡ä»¶ä¸­ååˆ é™¤ ```.roadhogrc.mock.js``` æ–‡ä»¶ï¼Œä½†æ˜¯è¦æ³¨æ„çš„æ˜¯ç›´æ¥å†™åœ¨ ```.roadhogrc.mock.js``` ä¸­çš„ mock æ•°æ®éœ€è¦è¿ç§»å‡ºæ¥ï¼Œæ¯”å¦‚å¯ä»¥æ–°å»º ```mock/common.js``` æ¥è¿ç§»è¿™éƒ¨åˆ†æ•°æ®ã€‚</span><br><span class="line"></span><br><span class="line">æ›´å¤šè¯´æ˜å¯ä»¥å‚è€ƒ umi çš„æ–‡æ¡£[Mock æ•°æ®](https://umijs.org/guide/mock-data.html)ã€‚</span><br><span class="line"></span><br><span class="line">### ä¿®æ”¹ .gitignore</span><br><span class="line">ä½¿ç”¨ umi åä½ éœ€è¦å°† umi åœ¨å¼€å‘å’Œæ„å»ºä¸­çš„ä¸´æ—¶æ–‡ä»¶æ·»åŠ åˆ° .gitignore é‡Œé¢ã€‚</span><br></pre></td></tr></table></figure></p>
<p>.umi<br>.umi-production<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">### ä¿®æ”¹ä»£ç åˆ«åç­‰ç»†èŠ‚</span><br><span class="line">ä»¥ä¸Šçš„æ“ä½œå®Œæˆä¹‹åä½ å°±å¯ä»¥è¿è¡Œ ```npm start``` å¯åŠ¨ä½ çš„é¡¹ç›®äº†ï¼Œä½ ä¼šçœ‹åˆ°æŠ¥é”™ï¼Œä½†æ˜¯ä¸è¦æ…Œï¼ŒæŒ‰ç…§æŠ¥é”™ä¿¡æ¯ä¸€æ­¥ä¸€æ­¥ä¿®æ”¹å³å¯ã€‚ä½ å¯èƒ½éœ€è¦ä¿®æ”¹çš„å†…å®¹æœ‰ï¼š</span><br><span class="line"></span><br><span class="line">- ä¿®æ”¹åˆ«å ```components/``` ä¸º ```@/components```ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç›´æ¥åœ¨ ```config/config.js``` ä¿ç•™åŸæœ‰çš„åˆ«åã€‚</span><br><span class="line"></span><br><span class="line">- ä¿®æ”¹ ```src/utils/request.js``` ä¸­å’Œ dva ç›¸å…³çš„éƒ¨åˆ†ã€‚å¯ä»¥ç›´æ¥ä½¿ç”¨ ```umi/router``` æ¥åšè·³è½¬ã€‚</span><br><span class="line"></span><br><span class="line">- ```src/utils/request.js``` çš„ ```/exception/400``` å¯ä»¥æ”¹ä¸º ```/400```ã€‚</span><br><span class="line"></span><br><span class="line">- å»æ‰ ```BasicLayout``` ä¸­çš„ ```const baseRedirect = this.getBaseRedirect();``` ç›¸å…³é€»è¾‘ï¼Œè·³è½¬çš„é€»è¾‘å¯ä»¥é€šè¿‡ umi çš„ routes é…ç½®å®ç°ã€‚</span><br><span class="line"></span><br><span class="line">- ä¿®æ”¹ ```BasicLayout``` ä¸­çš„ ```getPageTitle``` å’Œ ```getBreadcrumbNameMap``` çš„ç›¸å…³é€»è¾‘ï¼Œå‚è€ƒä¸‹é¢çš„ä»£ç å®ç°ã€‚å®Œæ•´ä»£ç å‚è€ƒ v1 å‡çº§ [commit](https://github.com/ant-design/ant-design-pro/commit/dc2118db78f9b2b7072051fea558e8d1386ce34c)ã€‚</span><br><span class="line"></span><br><span class="line">æ³¨ï¼š```memoizeOne``` æ˜¯ ```memoize-one npm``` åŒ…æä¾›çš„æ–¹æ³•ï¼Œä½ éœ€è¦å…ˆ install memoize-oneã€‚```deepEqual``` æ˜¯ ```lodash.isequal``` åŒ…æä¾›çš„ï¼Œä¹Ÿéœ€è¦å®‰è£…ç›¸å…³ä¾èµ–ã€‚</span><br></pre></td></tr></table></figure></p>
<p>/**</p>
<ul>
<li>è·å–é¢åŒ…å±‘æ˜ å°„</li>
<li>@param {Object} menuData èœå•é…ç½®<br>*/<br>const getBreadcrumbNameMap = memoizeOne(meun =&gt; {<br>const routerMap = {};<br>const mergeMeunAndRouter = meunData =&gt; {<br> meunData.forEach(meunItem =&gt; {<br>   if (meunItem.children) {<pre><code>mergeMeunAndRouter(meunItem.children);
</code></pre>   }<br>   // Reduce memory usage<br>   routerMap[meunItem.path] = meunItem;<br> });<br>};<br>mergeMeunAndRouter(meun);<br>return routerMap;<br>}, deepEqual);<br><code>`</code><br>é™¤äº†é¡¹ç›®èƒ½å¤Ÿæ­£å¸¸å¯åŠ¨ï¼Œä½ è¿˜åº”è¯¥å†è¿è¡Œä¸‹ tnpm run lint æ¥è§£å†³ä¸‹éƒ¨åˆ†åœ¨è¿ç§»è¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ¯”è¾ƒä½çº§çš„é—®é¢˜ã€‚ä½ å¯èƒ½éœ€è¦å¤„ç†çš„é—®é¢˜å’Œæ–¹æ¡ˆå¦‚ä¸‹ï¼š</li>
</ul>
<ul>
<li><p><code>no-unused-vars</code> é”™è¯¯ï¼Œæ£€æŸ¥ä¸‹æ²¡æœ‰é—®é¢˜å°±å¯ä»¥åˆ é™¤å®ƒäº†ã€‚</p>
</li>
<li><p><code>react/destructuring-assignment</code> é”™è¯¯ï¼Œä½ å¯èƒ½éœ€è¦ä¿®æ”¹ç±»ä¼¼ <code>this.props.children</code> ä¸º <code>const { children } = this.props</code> ä¹‹ç±»çš„é”™è¯¯ã€‚</p>
</li>
</ul>
<p>å¦å¤–æˆ‘ä»¬æ¨èä½ è¿ç§»åˆ° 2.0 æ¨èçš„ lint è§„åˆ™ï¼Œè®©ä½ çš„ä»£ç æ›´ä¼˜é›…ã€‚</p>
<h2 id="ä½¿ç”¨-2-0-ä¸­çš„æ–°åŠŸèƒ½"><a href="#ä½¿ç”¨-2-0-ä¸­çš„æ–°åŠŸèƒ½" class="headerlink" title="ä½¿ç”¨ 2.0 ä¸­çš„æ–°åŠŸèƒ½"></a>ä½¿ç”¨ 2.0 ä¸­çš„æ–°åŠŸèƒ½</h2><p>å®Œæˆ roadhog åˆ° umi çš„è¿ç§»åè¦ä½¿ç”¨ 2.0 çš„æ–°åŠŸèƒ½å°±ä¼šå˜å¾—ç®€å•ã€‚2.0 ä¸­æˆ‘ä»¬ä¸»è¦æœ‰å¦‚ä¸‹çš„æ–°ç‰¹æ€§æ·»åŠ ï¼š</p>
<ul>
<li>æ–°å¢ç”¨æˆ·ä¿¡æ¯é¡µé¢ã€‚</li>
<li>æ”¯æŒå›½é™…åŒ–ã€‚</li>
<li>æ”¯æŒé£æ ¼åˆ‡æ¢ã€‚</li>
</ul>
<h3 id="æ–°å¢ç”¨æˆ·ä¿¡æ¯é¡µé¢"><a href="#æ–°å¢ç”¨æˆ·ä¿¡æ¯é¡µé¢" class="headerlink" title="æ–°å¢ç”¨æˆ·ä¿¡æ¯é¡µé¢"></a>æ–°å¢ç”¨æˆ·ä¿¡æ¯é¡µé¢</h3><p>ä½ åªéœ€è¦å°† v2 pages ç›®å½•ä¸‹å¯¹åº”çš„ä»£ç  copy åˆ°ä½ çš„é¡¹ç›®ä¸­å¹¶åœ¨ <code>config/config.js</code> ä¸­ä¿®æ”¹ routes é…ç½®å³å¯ã€‚è¿™éƒ¨åˆ†ç›¸å¯¹æ¥è¯´æ¯”è¾ƒç®€å•ï¼Œè¿™é‡Œä¸åšè¿‡å¤šè¯´æ˜ã€‚å¦å¤–é™¤äº†æ–°å¢çš„ç”¨æˆ·ä¿¡æ¯é¡µé¢å¤–ï¼Œä½ ä¹Ÿå¯ä»¥å‚è€ƒå…¶ä»–é¡µé¢çš„æ›´æ–°å»è·³è½¬ä½ è‡ªå·±é¡¹ç›®ä¸­çš„ä»£ç ã€‚</p>
<h3 id="æ”¯æŒå›½é™…åŒ–"><a href="#æ”¯æŒå›½é™…åŒ–" class="headerlink" title="æ”¯æŒå›½é™…åŒ–"></a>æ”¯æŒå›½é™…åŒ–</h3><p>åœ¨ Ant Design Pro 2.0 ä¸­æˆ‘ä»¬ä½¿ç”¨äº† umi çš„æ’ä»¶ <code>umi-plugin-locale</code> æ¥å®ç°å›½é™…åŒ–ã€‚è¯¥æ’ä»¶ä¹Ÿå·²ç»å†…ç½®åˆ°äº† <code>umi-plugin-react</code> æ’ä»¶é›†ä¸­ã€‚ä½ å¯ä»¥åœ¨è¯¥æ’ä»¶é›†çš„é…ç½®ä¸­æ·»åŠ  locale é…ç½®æ¥å¼€å¯å›½é™…åŒ–ã€‚</p>
<p>å¼€å¯å›½é™…åŒ–æ’ä»¶ä¹‹åä½ å°±å¯ä»¥åœ¨é¡¹ç›®ç›®å½•ä¸‹æ·»åŠ  <code>locales</code> æ–‡ä»¶å¤¹ï¼ŒæŒ‰ç…§çº¦å®šæ·»åŠ å›½é™…åŒ–èµ„æºæ–‡ä»¶åå°±å¯ä»¥é€šè¿‡åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ <code>umi/locale</code> æš´éœ²çš„ API æ¥å®ç°å›½é™…åŒ–äº†ã€‚</p>
<p>æ›´å¤šå…³äº <code>umi-plugin-locale</code> çš„é…ç½®å¯ä»¥æ’ä»¶å®ƒçš„<a href="https://umijs.org/plugin/umi-plugin-react.html#locale" target="_blank" rel="noopener">æ–‡æ¡£</a>ã€‚</p>
<h3 id="æ”¯æŒé£æ ¼åˆ‡æ¢"><a href="#æ”¯æŒé£æ ¼åˆ‡æ¢" class="headerlink" title="æ”¯æŒé£æ ¼åˆ‡æ¢"></a>æ”¯æŒé£æ ¼åˆ‡æ¢</h3><p>Ant Design Pro ä½¿ç”¨äº† less + cssModule ä½œä¸ºæ ·å¼çš„è§£å†³æ–¹æ¡ˆï¼Œä½ å¯ä»¥é€šè¿‡é…ç½® less ç¼–è¯‘æ—¶çš„ lessVars æ¥å°±è¯¥ä¸»é¢˜æ ·å¼é…ç½®ï¼Œåœ¨ umi ä¸­å†…ç½®äº†è¯¥åŠŸèƒ½ï¼Œä½ å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½® <code>theme</code> æ¥å®ç°ã€‚å‚è€ƒ umi çš„<a href="https://umijs.org/config/#theme" target="_blank" rel="noopener">é…ç½®æ–‡æ¡£</a>ã€‚</p>
<p>ä½†æ˜¯ v2 ç‰ˆæœ¬æ”¯æŒçš„å¯¼èˆªå¸ƒå±€æ–¹å¼ç­‰çš„è°ƒæ•´ä¸»è¦æ˜¯ä»£ç çš„ä¸šåŠ¡é€»è¾‘çš„å‡çº§ï¼Œä½ å¯ä»¥å‚è€ƒ v2 ä»£ç ä¸­çš„ <code>src/layouts/BasicLayout.js</code> çš„ä»£ç åšè°ƒæ•´ã€‚</p>
<p>å¯¹äºåœ¨çº¿çš„ä¸»é¢˜åˆ‡æ¢ï¼Œå› ä¸º less æ˜¯åœ¨æ„å»ºæ—¶ç¼–è¯‘çš„ï¼Œè¦æƒ³å®ç°åœ¨åˆ‡æ¢ï¼Œéœ€è¦æ”¯æŒ less åœ¨åœ¨çº¿ç¼–è¯‘ç­‰é—®é¢˜ã€‚ä¸ºäº†è§£å†³è¯¥é—®é¢˜ï¼Œæˆ‘ä»¬å¼€å‘äº† <code>ant-design-theme</code> çš„ webpack æ’ä»¶å’Œ <code>merge-less</code> æ’ä»¶ä¸€èµ·å®ç°äº†è¿™æ ·çš„åŠŸèƒ½ã€‚å¦‚æœä½ æœ‰éœ€è¦ï¼Œä½ å¯ä»¥å‚è€ƒ v2 ä»£ç ä¸­çš„ <code>config/plugin.config.js</code> å’Œ <code>src/models/setting.js</code> æ¥æ·»åŠ å¯¹åº”ä»£ç ã€‚</p>
<h3 id="æ›´å¤š"><a href="#æ›´å¤š" class="headerlink" title="æ›´å¤š"></a>æ›´å¤š</h3><p>æ›´å¤šè¯·æŸ¥çœ‹ Ant Design Pro 2.0 <a href="https://www.yuque.com/ant-design/ant-design-pro/ant_design_pro_2.0_is_out" target="_blank" rel="noopener">å‘å¸ƒæ—¥å¿—</a>ã€‚</p>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                        <li title='0' data-url='http://link.hhtjim.com/163/5146554.mp3'></li>
                    
                        <li title='1' data-url='http://link.hhtjim.com/qq/001faIUs4M2zna.mp3'></li>
                    
                </ul>
            
        </div>
        
    <div id='gitalk-container' class="comment link"
        data-ae='false'
        data-ci=''
        data-cs=''
        data-r=''
        data-o=''
        data-a=''
        data-d='false'
    >æŸ¥çœ‹è¯„è®º</div>


    </div>
    
</div>


    </div>
</div>
</body>
<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/diaspora.js"></script>
<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">
<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>




</html>